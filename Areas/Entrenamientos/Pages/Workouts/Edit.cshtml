@page
@model EditModel
@using Microsoft.AspNetCore.Authorization
@using RGNRK.Data

@{
    ViewData["Title"] = "Editar Descripción del Entrenamiento";
    Layout = "_Layout";
}

<h2>Editar Descripción del Entrenamiento</h2>

<form method="post">
    <div class="form-group">
        <input type="hidden" asp-for="Workout.Id" />
        <input type="hidden" asp-for="Workout.ExerciseId" />
        <label for="Description">Descripción</label>
        <textarea id="Description" name="Description" class="form-control">@Model.Workout.Description</textarea>
    </div>
    
    <button type="submit" class="btn btn-primary">Guardar</button>
</form>

@section Scripts {
    <script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script>
    <script>
        var editor = CKEDITOR.replace('Description');

        // Actualiza el textarea con el contenido del editor antes de enviar el formulario
        document.querySelector('form').addEventListener('submit', function () {
            editor.updateElement();
        });
    </script>

    <environment include="Development">
        <script src="~/Identity/lib/jquery-validation/dist/jquery.validate.js"></script>
        <script src="~/Identity/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"
                asp-fallback-src="~/Identity/lib/jquery-validation/dist/jquery.validate.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.validator"
                crossorigin="anonymous"
                integrity="sha384-rZfj/ogBloos6wzLGpPkkOr/gpkBNLZ6b6yLy4o+ok+t/SAKlL5mvXLr0OXNi1Hp">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.11/jquery.validate.unobtrusive.min.js"
                asp-fallback-src="~/Identity/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.validator && window.jQuery.validator.unobtrusive"
                crossorigin="anonymous"
                integrity="sha384-R3vNCHsZ+A2Lo3d5A6XNP7fdQkeswQWTIPfiYwSpEP3YV079R+93YzTeZRah7f/F">
        </script>
    </environment>
}